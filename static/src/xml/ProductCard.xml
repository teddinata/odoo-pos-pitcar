<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <!-- Extend ProductCard template to add stock badge -->
    <t t-name="point_of_sale.ProductCard" t-inherit="point_of_sale.ProductCard" t-inherit-mode="extension" owl="1">
        
        <!-- Add stock badge in top-right corner -->
        <xpath expr="//article[hasclass('product')]" position="inside">
            <t t-if="shouldDisplayStock">
                <div class="product-stock-badge" t-att-class="stockBadgeClass">
                    <t t-esc="stockDisplayText"/>
                </div>
            </t>
        </xpath>

        <!-- Add visual indicator class for out of stock products -->
        <xpath expr="//article[hasclass('product')]" position="attributes">
            <attribute name="t-att-class">
                shouldDisplayStock and stockLevel === 'out' ? 'product-out-of-stock' : ''
            </attribute>
        </xpath>

    </t>

</templates>
